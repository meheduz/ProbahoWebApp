(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[375],{9058:function(e,t,s){Promise.resolve().then(s.bind(s,4187))},4187:function(e,t,s){"use strict";s.r(t);var n=s(7573),r=s(7653),a=s(5620),i=s(2859),l=s(9846);let o={bkash:{min:10,max:5e4,daily:1e5,prefix:"01",length:11},nagad:{min:10,max:4e4,daily:8e4,prefix:"01",length:11},rocket:{min:10,max:3e4,daily:6e4,prefix:"018",length:11},upay:{min:10,max:25e3,daily:5e4,prefix:"01",length:11}},c=[{id:"bkash",name:"bKash",color:"bg-pink-50 hover:bg-pink-100",selectedColor:"bg-pink-100",borderColor:"border-pink-500"},{id:"nagad",name:"Nagad",color:"bg-orange-50 hover:bg-orange-100",selectedColor:"bg-orange-100",borderColor:"border-orange-500"},{id:"rocket",name:"Rocket",color:"bg-blue-50 hover:bg-blue-100",selectedColor:"bg-blue-100",borderColor:"border-blue-500"},{id:"upay",name:"Upay",color:"bg-purple-50 hover:bg-purple-100",selectedColor:"bg-purple-100",borderColor:"border-purple-500"}],d=()=>"TXN".concat(Date.now()).concat(Math.random().toString(36).substring(2,7)).toUpperCase();t.default=()=>{var e,t;let[s,u]=(0,r.useState)("method"),[m,h]=(0,r.useState)(""),[x,g]=(0,r.useState)(""),[b,p]=(0,r.useState)(!1),[f,y]=(0,r.useState)(""),[j,v]=(0,r.useState)(""),[N,w]=(0,r.useState)(""),[S,k]=(0,r.useState)(""),C=(0,i.useRouter)(),D=e=>{if(g(""),"method"===e)return!!f||(g("Please select a payment method"),!1);if("details"===e){let e=Number(m),t=o[f];return!m||isNaN(e)?(g("Please enter a valid amount"),!1):e<t.min?(g("Minimum amount is ".concat(t.min," BDT")),!1):e>t.max?(g("Maximum amount is ".concat(t.max.toLocaleString()," BDT")),!1):j?j.startsWith(t.prefix)?j.length===t.length||(g("".concat(f," number should be ").concat(t.length," digits")),!1):(g("".concat(f," number should start with ").concat(t.prefix)),!1):(g("Please enter your ".concat(f," account number")),!1)}return"confirm"===e&&(!!N&&6===N.length||(g("Please enter the 6-digit OTP"),!1))};return(0,n.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Add Money to Wallet"}),(0,n.jsxs)("div",{className:"max-w-md mx-auto bg-white rounded-lg shadow-md p-6",children:[(0,n.jsx)("div",{className:"flex items-center mb-8",children:["method","details","confirm"].map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"\n                flex items-center justify-center w-8 h-8 rounded-full \n                ".concat(s===e?"bg-blue-600 text-white":s>e?"bg-green-500 text-white":"bg-gray-200 text-gray-600","\n              "),children:s>e?(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):t+1}),t<2&&(0,n.jsx)("div",{className:"w-full h-1 mx-2 ".concat(s>e?"bg-green-500":"bg-gray-200")})]},e))}),"method"===s&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-medium text-gray-700 mb-4",children:"Select Payment Method"}),(0,n.jsx)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:c.map(e=>(0,n.jsxs)("button",{onClick:()=>{g(""),y(e.id)},disabled:b,className:"relative flex items-center justify-center p-4 rounded-lg border-2 transition-all duration-200\n              ".concat(f===e.id?e.selectedColor+" "+e.borderColor:"border-gray-200 "+e.color,"\n            "),children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(l.Z,{provider:e.id,className:"mx-auto mb-2"}),(0,n.jsx)("span",{className:"block text-sm font-medium text-gray-700",children:e.name})]}),f===e.id&&(0,n.jsx)("div",{className:"absolute top-2 right-2 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:(0,n.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]},e.id))})]}),"details"===s&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,n.jsx)("button",{onClick:()=>u("method"),className:"text-gray-600 hover:text-gray-800",children:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,n.jsx)("h2",{className:"text-lg font-medium text-gray-700",children:"Enter Payment Details"})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{htmlFor:"account",className:"block text-sm font-medium text-gray-700 mb-1",children:[null==f?void 0:f.toUpperCase()," Account Number"]}),(0,n.jsx)("input",{type:"tel",id:"account",value:j,onChange:e=>{g(""),v(e.target.value.replace(/\D/g,""))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your ".concat(f," number"),maxLength:11,disabled:b}),(0,n.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Format: ",o[f].prefix,"XXXXXXXX"]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount (BDT)"}),(0,n.jsx)("input",{type:"number",id:"amount",value:m,onChange:e=>{g(""),h(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter amount",min:o[f].min,max:o[f].max,disabled:b})]})]})]}),"confirm"===s&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,n.jsx)("button",{onClick:()=>u("details"),className:"text-gray-600 hover:text-gray-800",children:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,n.jsx)("h2",{className:"text-lg font-medium text-gray-700",children:"Confirm Payment"})]}),(0,n.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Transaction ID"}),(0,n.jsx)("span",{className:"font-medium",children:S})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Method"}),(0,n.jsx)("span",{className:"font-medium",children:null===(t=c.find(e=>e.id===f))||void 0===t?void 0:t.name})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Account"}),(0,n.jsx)("span",{className:"font-medium",children:j})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Amount"}),(0,n.jsxs)("span",{className:"font-medium",children:[Number(m).toLocaleString()," BDT"]})]})]})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-700 mb-1",children:"Enter OTP"}),(0,n.jsx)("input",{type:"text",id:"otp",value:N,onChange:e=>{g(""),w(e.target.value.replace(/\D/g,""))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter 6-digit OTP",maxLength:6,disabled:b}),(0,n.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Please enter the OTP sent to your ",f," account"]})]})]}),x&&(0,n.jsx)("p",{className:"mt-4 text-sm text-red-600",children:x}),(0,n.jsxs)("div",{className:"mt-6 space-y-3",children:["confirm"===s?(0,n.jsx)("button",{onClick:()=>{try{if(!D("confirm"))return;p(!0);let e=Number(m),t=a.t.getDailyStats(),s=o[f];if(t.received+e>s.daily){g("Daily deposit limit (".concat(s.daily.toLocaleString()," BDT) exceeded for ").concat(f)),p(!1);return}setTimeout(()=>{let t=setTimeout(()=>{try{var t;a.t.addTransaction({userId:"1",type:"credit",amount:e,currency:"BDT",status:"success",description:"Added money from ".concat(null===(t=c.find(e=>e.id===f))||void 0===t?void 0:t.name),mfsProvider:f,account:j,note:"TxnID: ".concat(S)}),h(""),g(""),y(""),v(""),w(""),k(""),C.push("/")}catch(e){console.error("Transaction failed:",e),g("Transaction failed. Please try again.")}finally{p(!1)}},1500);return()=>clearTimeout(t)},1500)}catch(e){g("Something went wrong. Please try again."),console.error(e)}finally{p(!1)}},disabled:b,className:"w-full py-3 px-4 rounded-md text-white font-medium transition-colors duration-200\n                ".concat(b?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700","\n              "),children:b?"Processing...":"Confirm Payment"}):(0,n.jsx)("button",{onClick:()=>{if(D(s)){if("method"===s)u("details");else if("details"===s){let e=d();k(e),u("confirm"),console.log("OTP sent to ".concat(j," for transaction ").concat(e))}}},disabled:b,className:"w-full py-3 px-4 rounded-md text-white font-medium transition-colors duration-200\n                ".concat(f?b?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700":"bg-gray-300 cursor-not-allowed","\n              "),children:b?"Processing...":"Continue"}),(0,n.jsx)("button",{onClick:()=>C.push("/"),disabled:b,className:"w-full py-3 px-4 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"})]}),(0,n.jsxs)("div",{className:"mt-6",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Important Notes:"}),(0,n.jsx)("ul",{className:"text-sm text-gray-600 list-disc pl-5 space-y-1",children:f?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("li",{children:["Selected Provider: ",null===(e=c.find(e=>e.id===f))||void 0===e?void 0:e.name]}),(0,n.jsxs)("li",{children:["Minimum amount: ",o[f].min.toLocaleString()," BDT"]}),(0,n.jsxs)("li",{children:["Maximum amount: ",o[f].max.toLocaleString()," BDT"]}),(0,n.jsxs)("li",{children:["Daily deposit limit: ",o[f].daily.toLocaleString()," BDT"]})]}):(0,n.jsx)("li",{children:"Please select a payment method to see limits"})})]})]})]})}},9846:function(e,t,s){"use strict";var n=s(7573),r=s(6072),a=s.n(r);t.Z=e=>{let{provider:t,size:s="md",className:r=""}=e;return(0,n.jsx)("div",{className:"relative ".concat({sm:"w-[80px] h-8",md:"w-[120px] h-10",lg:"w-[160px] h-12"}[s]," ").concat(r),children:(0,n.jsx)(a(),{src:"/images/mfs/".concat(t,".svg"),alt:"".concat(t.toUpperCase()," Logo"),fill:!0,className:"object-contain",priority:!0})})}},5620:function(e,t,s){"use strict";s.d(t,{t:function(){return a}});let n={wallet:"probaho_wallet",topups:"probaho_topups",transactions:"probaho_transactions",user:"probaho_user",settings:"probaho_settings"};class r{static getInstance(){return r.instance||(r.instance=new r),r.instance}subscribe(e,t){return this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push(t),()=>this.unsubscribe(e,t)}unsubscribe(e,t){var s;this.subscribers[e]=(null===(s=this.subscribers[e])||void 0===s?void 0:s.filter(e=>e!==t))||[]}notify(e,t){var s;null===(s=this.subscribers[e])||void 0===s||s.forEach(e=>e(t))}getWallet(){if(!this.isClient)return null;let e=localStorage.getItem(n.wallet);return e?JSON.parse(e):null}setWallet(e){this.isClient&&(localStorage.setItem(n.wallet,JSON.stringify(e)),this.notify("wallet",e),window.dispatchEvent(new CustomEvent("walletUpdated",{detail:e})))}updateWalletBalance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"credit";if(!this.isClient)return null;let s=this.getWallet();if(!s)return null;let n="credit"===t?Number(s.balance||0)+Number(e):Number(s.balance||0)-Number(e),r={...s,balance:n,updatedAt:new Date().toISOString()};return this.setWallet(r),r}getTransactions(){let e=localStorage.getItem(n.transactions);return e?JSON.parse(e):[]}addTransaction(e){let t=this.getTransactions(),s={...e,id:"TXN_".concat(Date.now()),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},r=[s,...t];return localStorage.setItem(n.transactions,JSON.stringify(r)),this.notify("transactions",r),"success"===s.status&&this.updateWalletBalance(s.amount,s.type),s}getDailyStats(){let e=this.getTransactions(),t=new Date,s=e.filter(e=>new Date(e.createdAt).toDateString()===t.toDateString());return{sent:s.filter(e=>"debit"===e.type).reduce((e,t)=>e+t.amount,0),received:s.filter(e=>"credit"===e.type).reduce((e,t)=>e+t.amount,0),transactions:s.length}}clearAllData(){Object.values(n).forEach(e=>localStorage.removeItem(e)),window.dispatchEvent(new Event("storage"))}constructor(){this.subscribers={},this.isClient=!0,this.isClient&&!this.getWallet()&&this.setWallet({id:"1",userId:"1",balance:0,currency:"BDT",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}}let a=r.getInstance()},2537:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return n}});let n=s(7675)._(s(7653)).default.createContext(null)},8294:function(e,t,s){"use strict";var n=s(7653),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,s){var n,a={},c=null,d=null;for(n in void 0!==s&&(c=""+s),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,n)&&!o.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:r,type:e,key:c,ref:d,props:a,_owner:l.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},7573:function(e,t,s){"use strict";e.exports=s(8294)},2859:function(e,t,s){e.exports=s(2988)}},function(e){e.O(0,[72,293,16,744],function(){return e(e.s=9058)}),_N_E=e.O()}]);