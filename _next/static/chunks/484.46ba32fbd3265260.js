"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[484],{1484:function(e,t,s){s.r(t),s.d(t,{default:function(){return h}});var a=s(7573),n=s(7653),r=s(1819),i=s(3555),l=s(1859),c=s(9214);let o=n.forwardRef(function({title:e,titleId:t,...s},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}),d=n.forwardRef(function({title:e,titleId:t,...s},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181"}))});var u=s(3061),m=s(5620);function h(){let[e,t]=(0,n.useState)(null),[s,h]=(0,n.useState)(!0),[x,g]=(0,n.useState)(!0),[b,f]=(0,n.useState)([]),[p,y]=(0,n.useState)({sent:0,received:0,transactions:0});(0,n.useEffect)(()=>{(()=>{try{g(!0);let e=m.t.getWallet(),s=m.t.getTransactions(),a=m.t.getDailyStats();e&&t(e),s&&f(s),a&&y(a)}finally{g(!1)}})();let e=m.t.subscribe("wallet",e=>{e&&t(e)}),s=m.t.subscribe("transactions",e=>{e&&(f(e),y(m.t.getDailyStats()))});return()=>{e(),s()}},[]);let v=e=>new Date(e).toLocaleTimeString();return x?(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("div",{className:"h-6 w-24 bg-gray-200 rounded"}),(0,a.jsx)("div",{className:"h-6 w-6 bg-gray-200 rounded"})]}),(0,a.jsx)("div",{className:"h-12 w-32 bg-gray-200 rounded mb-4"}),(0,a.jsx)("div",{className:"h-4 w-20 bg-gray-200 rounded"})]})}):e?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card bg-gradient-to-br from-primary-600 to-secondary-600 text-white",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(i.Z,{className:"h-6 w-6"}),(0,a.jsx)("span",{className:"font-medium",children:"Probaho Balance"})]}),(0,a.jsx)("button",{onClick:()=>h(!s),className:"p-1 hover:bg-white/20 rounded-full transition-colors duration-200",children:s?(0,a.jsx)(l.Z,{className:"h-5 w-5"}):(0,a.jsx)(c.Z,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("div",{className:"text-3xl font-bold mb-1",children:s?(0,u.xG)(e.balance):"••••••"}),(0,a.jsx)("div",{className:"text-blue-100 text-sm",children:"Available Balance"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(o,{className:"h-4 w-4 text-green-300"}),(0,a.jsxs)("span",{className:"text-green-300",children:["+",(0,u.xG)(p.received)]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(d,{className:"h-4 w-4 text-red-300"}),(0,a.jsxs)("span",{className:"text-red-300",children:["-",(0,u.xG)(p.sent)]})]})]})]}),(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Today's Activity"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(0,u.xG)(p.received)}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Received"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:(0,u.xG)(p.sent)}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Sent"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-primary-600",children:p.transactions}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Transactions"})]})]})]}),b.length>0&&(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Recent Activity"}),(0,a.jsx)("a",{href:"/history",className:"text-primary-600 text-sm hover:text-primary-700",children:"View All"})]}),(0,a.jsx)("div",{className:"space-y-3",children:b.slice(0,3).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat("credit"===e.type?"bg-green-100 text-green-600":"bg-red-100 text-red-600"),children:"credit"===e.type?(0,a.jsx)(o,{className:"h-5 w-5"}):(0,a.jsx)(d,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 text-sm",children:e.description}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:v(e.createdAt)})]})]}),(0,a.jsxs)("div",{className:"font-semibold ".concat("credit"===e.type?"text-green-600":"text-red-600"),children:["credit"===e.type?"+":"-",(0,u.xG)(e.amount)]})]},e.id))})]})]}):(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(i.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Unable to load wallet"})]})})}},5620:function(e,t,s){s.d(t,{t:function(){return r}});let a={wallet:"probaho_wallet",topups:"probaho_topups",transactions:"probaho_transactions",user:"probaho_user",settings:"probaho_settings"};class n{static getInstance(){return n.instance||(n.instance=new n),n.instance}subscribe(e,t){return this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push(t),()=>this.unsubscribe(e,t)}unsubscribe(e,t){var s;this.subscribers[e]=(null===(s=this.subscribers[e])||void 0===s?void 0:s.filter(e=>e!==t))||[]}notify(e,t){var s;null===(s=this.subscribers[e])||void 0===s||s.forEach(e=>e(t))}getWallet(){if(!this.isClient)return null;let e=localStorage.getItem(a.wallet);return e?JSON.parse(e):null}setWallet(e){this.isClient&&(localStorage.setItem(a.wallet,JSON.stringify(e)),this.notify("wallet",e),window.dispatchEvent(new CustomEvent("walletUpdated",{detail:e})))}updateWalletBalance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"credit";if(!this.isClient)return null;let s=this.getWallet();if(!s)return null;let a="credit"===t?Number(s.balance||0)+Number(e):Number(s.balance||0)-Number(e),n={...s,balance:a,updatedAt:new Date().toISOString()};return this.setWallet(n),n}getTransactions(){let e=localStorage.getItem(a.transactions);return e?JSON.parse(e):[]}addTransaction(e){let t=this.getTransactions(),s={...e,id:"TXN_".concat(Date.now()),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},n=[s,...t];return localStorage.setItem(a.transactions,JSON.stringify(n)),this.notify("transactions",n),"success"===s.status&&this.updateWalletBalance(s.amount,s.type),s}getDailyStats(){let e=this.getTransactions(),t=new Date,s=e.filter(e=>new Date(e.createdAt).toDateString()===t.toDateString());return{sent:s.filter(e=>"debit"===e.type).reduce((e,t)=>e+t.amount,0),received:s.filter(e=>"credit"===e.type).reduce((e,t)=>e+t.amount,0),transactions:s.length}}clearAllData(){Object.values(a).forEach(e=>localStorage.removeItem(e)),window.dispatchEvent(new Event("storage"))}constructor(){this.subscribers={},this.isClient=!0,this.isClient&&!this.getWallet()&&this.setWallet({id:"1",userId:"1",balance:0,currency:"BDT",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}}let r=n.getInstance()},3061:function(e,t,s){function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"BDT";return new Intl.NumberFormat("en-BD",{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function n(e){let t=e.replace(/\D/g,"");return/^(880|0)?1[3-9]\d{8}$/.test(t)}function r(e){let t="string"==typeof e?new Date(e):e,s=Math.floor((new Date().getTime()-t.getTime())/1e3);return s<60?"Just now":s<3600?"".concat(Math.floor(s/60),"m ago"):s<86400?"".concat(Math.floor(s/3600),"h ago"):s<2592e3?"".concat(Math.floor(s/86400),"d ago"):function(e){let t="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("en-BD",{year:"numeric",month:"short",day:"numeric"}).format(t)}(t)}function i(e){return({bkash:"bKash",rocket:"Rocket",nagad:"Nagad",upay:"Upay",tapp:"Tapp",mycash:"MyCash"})[e]||e}function l(e){return({bkash:"bg-pink-500",rocket:"bg-blue-500",nagad:"bg-green-500",upay:"bg-purple-500",tapp:"bg-orange-500",mycash:"bg-red-500"})[e]||"bg-gray-500"}function c(e){return e>0&&e<=1e5}s.d(t,{P4:function(){return l},Y0:function(){return n},hz:function(){return c},ni:function(){return r},oZ:function(){return i},xG:function(){return a}})},9214:function(e,t,s){var a=s(7653);let n=a.forwardRef(function({title:e,titleId:t,...s},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))});t.Z=n},1859:function(e,t,s){var a=s(7653);let n=a.forwardRef(function({title:e,titleId:t,...s},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))});t.Z=n}}]);